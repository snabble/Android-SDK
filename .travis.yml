language: android
jdk: oraclejdk8
sudo: false
android:
  components:
  - platform-tools
  - tools
  - build-tools-27.0.3
  - android-27
  - extra-android-m2repository
before_install:
    - yes | sdkmanager "platforms;android-27"
script:
- "./gradlew build"
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.android/build-cache"
env:
  global:
  - secure: N3EBbTG204iyRystHZFo0iMbnfSPxXHO3N+ZNAAP5rFR+ONmvRlIb767q4pByvD9KDdyvbg6XNGDuLVpXcJGlZXauSMykpk6JnizQVLLUHsD7qJYi+v7osez4qvIuEP0kQ/JLUQAgzDL1kLFinDzullpbpqmwY0zIcc5xhclR7+XH7hbDIEgNiVnrDIzRg8cOpOYRFYQeMTq2n7D10LyO9BYEIJxpxukDcUbPe0XOeHYbDjY+eI/OFohsSOjovChmdhz70KpXDePpim0pBBNiYcFdxkTsljb1tOmMWtGL7OcKCzscIOIk+mSGT7+isDTdNmVvHVQAKchlC3+nuI4vIhLy9ErHnfNlKKCJd1cjsFXXXmEnMJRnLk3ULIH9yUSjOCXWnRCCAZPcKyBjdwGinCuHySZ+PcnlzFrY0A6kqPR1jcCZsP+YyQJL8mPsyXAObFAeisK9ipNFsPkEbdrjYnBMO/A1nB++Abw9A/xp0pvar15l2qP4gn2zbo36OYL5v4KvGfO53WMyeyp2elRdnUyMswU4LHt0VLUEiO3/uUfl5MjilQST9xPWE5lZ00elKEoznNXD/djeOLYXvWKcQ/65AX6kjky5NQX3GTjyVemvsKLDQVT0HlioHRwP7YMkrtlD+el0R1DVjFBQ68o7fKFcMXmfiXN5ryyM0DYgn8=
deploy:
  - provider: script
    script: bash travis_release.sh
    skip_cleanup: true
    on:
      repo: snabble/Android-SDK
      tags: true
      branch: master
  - provider: releases
    skip_cleanup: true
    api_key:
      secure: RSusFhQL4TcENHK6SmeJvDWuHGJ8Rsit4cN2Qk2/L86i/dVJhL6YqH9ADQbkubNI/x6hSb9MabPJq6dc3dfKDLA6sDDLCBNKYmEtFQQDsAsTv0eh4PBsve5aKlENU+4JNXdvMM0Z/Cc7fRiKLk1KrwqmHgPjxOKEMmsigLw4UCaIc59PfuNe9CoFQXRroCc7xETwdQbQ+v5TdsbRH6Ic3CNTCEUSNsgTNIOmegzcNkQ+SiWw+uZzj656VfogpbTOmfqpSlxXMU8mcKWIeP5vgCZIKiJ+78M/brner+XzprStnKmwLIrg2EXOdAn+QZHiayonju1fRp45EwqVSR48vk7g9Vt1dmeYeWMfqvrzoQJU41eJ8S4jt/cOrvbz5Bde6Eme+NC1Zu8mSy9SGyyRd31IVu2A3DmajvwicD7zfXG2BlXTvFGyamnmcMnedNxVtKCWHeMzE7sDMVmOOMGuzZYoO/o+wBW7M1QgFQMU2ADk9xvHbYtqELZlZwIkNNkYAV+TeIxahr8FINpTUmQbF53uRWLdgNu4NENhoq5Vrbj9jY4BVSNqOXPv3ZZekIhAwfpUl0t97WILrHCH/RVUmOhswo46JBWy3gF1uMFRp3pi+/AWapKsbycdSARPVl1tCyjw7ZRqmdYAZvu+tZZrmZ+563V7qm0YAu0nOusac3c=
    file:
    - "core/build/outputs/aar/core-release.aar"
    - "ui/build/outputs/aar/ui-release.aar"
    - "ui-integration/build/outputs/aar/ui-integration-release.aar"
    - "utils/build/outputs/aar/utils-release.aar"
    on:
      repo: snabble/Android-SDK
      tags: true
      branch: master